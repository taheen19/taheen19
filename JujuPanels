local MyMixin = {}

function MyMixin:CreateWhiteFrame() ---Creates a Host frame
    local myFrame = CreateFrame("Frame", "MyWhiteFrame", UIParent)
    myFrame:SetSize(1024, 512) -- replace with the desired size
    myFrame:SetPoint("CENTER") -- replace with the desired position
    myFrame.texture = myFrame:CreateTexture(nil,"BACKGROUND")
    myFrame.texture:SetAllPoints()
    myFrame.texture:SetTexture("Interface\\Addons\\JujuPanels\\background\\blacksquare.tga") --texture of this frame
	
    -- Make the frame draggable
    myFrame:SetMovable(true)
    myFrame:EnableMouse(true)
    myFrame:RegisterForDrag("LeftButton")
    myFrame:SetScript("OnDragStart", function() myFrame:StartMoving() end)
    myFrame:SetScript("OnDragStop", function() myFrame:StopMovingOrSizing() end)

    -- Create a button wihtin the Host frame
    local myButton = CreateFrame("Button", "MyButton", myFrame, "UIPanelButtonTemplate")
    myButton:SetSize(100, 50) -- width, height
    myButton:SetText("Player Frame")
    myButton:SetPoint("LEFT", myFrame, "CENTER", -350, 91) -- position the button at the center of the frame
	
    -- Create a dropdown menu wihtin the Host frame
    local dropdown = CreateFrame("Frame", "MyDropdownMenu", myFrame, "UIDropDownMenuTemplate")
    dropdown:SetPoint("LEFT", myButton, "RIGHT",  20, -10) -- position the dropdown next to the button with a 10 pixel gap

    -- List of available textures
    local textures = {
        "Interface\\Addons\\JujuPanels\\player\\PF1.tga",
        "Interface\\Addons\\JujuPanels\\player\\PF2.tga",
        -- Add more texture paths here
    }

    -- Variable to store the selected texture
    local selectedTexture = textures[1] -- Default to the first texture

    -- Initialize the dropdown menu
    UIDropDownMenu_Initialize(dropdown, function(self, level, menuList)
        local info = UIDropDownMenu_CreateInfo()
        for k,v in pairs(textures) do
            info = UIDropDownMenu_CreateInfo()
            info.text = v
            info.value = v
            info.func = function(self)
                -- Store the selected texture
                selectedTexture = self.value
                UIDropDownMenu_SetSelectedID(dropdown, self:GetID())

                -- Apply the selected texture to the frame
                if _G["PF"] and _G["PF"].texture then
                    _G["PF"].texture:SetTexture(selectedTexture)
                end
            end
            UIDropDownMenu_AddButton(info, level)
        end
    end)

    -- Create a horizontal slider wihtin the Host frame
    local mySlider = CreateFrame("Slider", "MySlider", myFrame, "OptionsSliderTemplate")
    mySlider:SetPoint("LEFT", dropdown, "RIGHT", 160, 0) -- position the slider next to the dropdown with a 10 pixel gap
    mySlider:SetMinMaxValues(50, 500) -- set the range of the slider (you can adjust this as needed)
    mySlider:SetValue(200) -- set the initial value of the slider (this should match the initial size of the frame)
    mySlider:SetScript("OnValueChanged", function(self, value)
        -- Resize the frame when the slider value changes
        if _G["PF"] then
            local height = _G["PF"]:GetHeight() -- get the current height of the frame
            _G["PF"]:SetSize(value, height) -- set the width to the slider value
        end
    end)

    -- Create a vertical slider wihtin the Host frame
    local myVerticalSlider = CreateFrame("Slider", "MyVerticalSlider", myFrame, "OptionsSliderTemplate")
    myVerticalSlider:SetPoint("LEFT", mySlider, "RIGHT", 20, 0) -- position the vertical slider next to the horizontal slider with a 20 pixel gap
    myVerticalSlider:SetMinMaxValues(50, 500) -- set the range of the slider (you can adjust this as needed)
    myVerticalSlider:SetValue(100) -- set the initial value of the slider (this should match the initial height of the frame)
    myVerticalSlider:SetOrientation('VERTICAL') -- set the orientation to vertical
    myVerticalSlider:SetScript("OnValueChanged", function(self, value)
        -- Resize the frame when the slider value changes
        if _G["PF"] then
            local width = _G["PF"]:GetWidth() -- get the current width of the frame
            _G["PF"]:SetSize(width, value) -- set the height to the slider value
        end
    end)

    -- Create a checkbox
    local myCheckbox = CreateFrame("CheckButton", "MyCheckbox", myFrame, "ChatConfigCheckButtonTemplate")
    myCheckbox:SetPoint("LEFT", myVerticalSlider, "RIGHT", 10, 0) -- position the checkbox next to the vertical slider with a 10 pixel gap
    myCheckbox.tooltip = "Show/Hide PF"
    _G[myCheckbox:GetName() .. "Text"]:SetText("Show PF")

    -- Checkbox script to show/hide the PF frame
    myCheckbox:SetScript("OnClick", function(self)
        if self:GetChecked() then
            -- Show the PF frame when the checkbox is checked
            if _G["PF"] then
                _G["PF"]:Show()
            end
        else
            -- Hide the PF frame when the checkbox is unchecked
            if _G["PF"] then
                _G["PF"]:Hide()
            end
        end
    end)

    -- Frame script to show the PF frame on load if the checkbox is checked
    myFrame:SetScript("OnLoad", function()
        if myCheckbox:GetChecked() and _G["PF"] then
            _G["PF"]:Show()
        end
    end)
	
	-- Create sliders for the red, green, and blue values
local colorSliders = {}
local colors = {"Red", "Green", "Blue"}
for i, color in ipairs(colors) do
    local slider = CreateFrame("Slider", "My" .. color .. "Slider", myFrame, "OptionsSliderTemplate")
    slider:SetPoint("TOP", myVerticalSlider, "BOTTOM", 0, -10 - (i - 1) * 30) -- position the sliders below each other with a 30 pixel gap
    slider:SetMinMaxValues(0, 1) -- set the range of the slider
    slider:SetValue(1) -- set the initial value of the slider
    slider:SetScript("OnValueChanged", function(self, value)
        -- Change the color of the frame when the slider value changes
        if _G["PF"] and _G["PF"].texture then
            local r, g, b = _G["PF"].texture:GetVertexColor()
            if color == "Red" then
                r = value
            elseif color == "Green" then
                g = value
            else
                b = value
            end
            _G["PF"].texture:SetVertexColor(r, g, b)
        end
    end)
    colorSliders[color] = slider
end

    -- Button script to create a new frame when Player Frame button is pressed
    myButton:SetScript("OnClick", function()
        -- Check if the frame already exists
        if not _G["PF"] then
            local newFrame = CreateFrame("Frame", "PF", PlayerFrame)
            newFrame:SetSize(200, 100) -- replace with the desired size
            newFrame:SetPoint("CENTER") -- replace with the desired position
            newFrame.texture = newFrame:CreateTexture(nil,"BACKGROUND")
            newFrame.texture:SetAllPoints()
            -- Apply the selected texture to the new frame
            newFrame.texture:SetTexture(selectedTexture)
        end
    end)
	
	
end

Mixin(PlayerFrame, MyMixin)
PlayerFrame:CreateWhiteFrame()
